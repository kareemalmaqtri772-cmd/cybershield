# تحليل بنية ووظائف نظام CyberShield التفاعلي التوعوي

## 1. المقدمة

يهدف هذا المستند إلى تحليل وفهم البنية والوظائف الأساسية لنظام CyberShield، وهو نظام تفاعلي توعوي مدعوم بالذكاء الاصطناعي يركز على الأمن السيبراني. يعتمد النظام على تقنيات الويب الأمامية (HTML, CSS, JavaScript) مع استخدام مكتبات الذكاء الاصطناعي في المتصفح (TensorFlow.js) لتوفير ميزات فحص وإصلاح الكود واختبار الوعي الأمني.

## 2. البنية العامة للنظام

يتكون النظام من مجموعة من ملفات JavaScript و HTML و CSS التي تعمل معًا لتوفير تجربة مستخدم تفاعلية. يمكن تقسيم البنية إلى المكونات الرئيسية التالية:

*   **`index.html`**: الواجهة الأمامية الرئيسية التي تحتوي على هيكل الصفحة وعناصر واجهة المستخدم المختلفة.
*   **`style.css`**: ملف الأنماط الذي يحدد التصميم المرئي للعناصر.
*   **`app.js`**: المنطق الأساسي للتطبيق، بما في ذلك التنقل بين الشاشات، واختيار نوع المستخدم، وتنسيق التفاعل مع محركات الذكاء الاصطناعي.
*   **`ai-engine.js`**: محرك الذكاء الاصطناعي في المتصفح، المسؤول عن اكتشاف الثغرات وإصلاح الكود باستخدام نماذج (محاكاة) TensorFlow.js.
*   **`ai-security.js`**: نظام أمان متقدم بالذكاء الاصطناعي، يوفر قاعدة بيانات للثغرات وقاعدة معرفية للتحليل والإصلاح الذكي.
*   **`security.js`**: مكتبة مساعدة لمهام الأمان الأساسية مثل تنظيف المدخلات والتحقق من الأنماط.
*   **`auth.js`**: نظام مصادقة المستخدمين مع وظائف تسجيل الدخول وتشفير كلمات المرور وتتبع محاولات تسجيل الدخول.

## 3. تحليل المكونات الرئيسية

### 3.1. `index.html`

يمثل هذا الملف الهيكل الأساسي لواجهة المستخدم. يتضمن:

*   **شاشة التحميل (`loading-screen`)**: تظهر أثناء تحميل نظام الذكاء الاصطناعي.
*   **الرأس (`header`)**: يحتوي على شعار CyberShield وحالة الذكاء الاصطناعي.
*   **الشاشة الرئيسية (`main-screen`)**: تعرض خيارات اختيار نوع المستخدم (عادي أو مبرمج).
*   **شاشات المستخدم (`regular-user-screen`, `programmer-screen`)**: واجهات مخصصة لكل نوع مستخدم، تعرض الميزات المتاحة.
*   **شاشات المحتوى (`content-screen`, `code-scan-screen`, `code-fix-screen`)**: لعرض المحتوى التوعوي، وواجهة فحص الكود، وواجهة إصلاح الكود.
*   **استيراد المكتبات**: يستورد `style.css`، وخطوط Google Fonts، و Font Awesome، و TensorFlow.js، بالإضافة إلى ملفات JavaScript المحلية (`app.js`, `ai-engine.js`, `ai-security.js`, `security.js`, `auth.js`).

### 3.2. `app.js`

هذا هو ملف المنطق المركزي للتطبيق. يقوم بـ:

*   **إدارة الشاشات**: يوفر وظائف `showScreen` للتنقل بين الشاشات المختلفة وإخفاء/إظهار العناصر.
*   **اختيار نوع المستخدم**: يسمح للمستخدم باختيار ما إذا كان 
مستخدمًا عاديًا أو مبرمجًا، ويحفظ هذا الاختيار في `localStorage`.
*   **تفاعل الذكاء الاصطناعي**: يحتوي على دوال مثل `startAIScan` و `startAIFix` التي تتفاعل مع محركات الذكاء الاصطناعي (الموجودة في `ai-engine.js` و `ai-security.js`) لإجراء الفحص والإصلاح.
*   **عرض النتائج**: يعالج عرض نتائج الفحص والإصلاح في واجهة المستخدم.
*   **دوال مساعدة**: مثل `updateCodeStats` لحساب عدد الأسطر والأحرف وتعقيد الكود، و `getVulnerabilityName` و `getSeverityText` لتنسيق عرض معلومات الثغرات.

### 3.3. `ai-engine.js`

هذا الملف يمثل محرك الذكاء الاصطناعي الأساسي الذي يعمل في المتصفح. الميزات الرئيسية تشمل:

*   **التهيئة (`init`)**: يقوم بتحميل نماذج الذكاء الاصطناعي (محاكاة حاليًا)، وقاعدة المعرفة، ونظام التعلم.
*   **تحميل النماذج (`loadModels`)**: يقوم بتحميل نماذج TensorFlow.js المدربة مسبقًا (نموذج كشف الثغرات، نموذج إصلاح الكود، نموذج تحليل التعقيد، نموذج تصنيف اللغة). حاليًا، هذه النماذج هي محاكاة لوظائف حقيقية.
*   **كشف الثغرات (`createDetectionModel`, `ruleBasedDetection`)**: يستخدم قواعد وأنماط محددة (Regular Expressions) لاكتشاف أنواع مختلفة من الثغرات الأمنية مثل SQL Injection، XSS، CSRF، Authentication Bypass، File Upload Vulnerabilities، و Command Injection.
*   **إصلاح الكود (`createRepairModel`, `intelligentRepair`)**: يقدم وظائف لإصلاح الثغرات المكتشفة بناءً على قواعد محددة لكل نوع ثغرة.
*   **إحصائيات الأداء**: يتتبع إحصائيات مثل إجمالي عمليات الفحص، الثغرات المكتشفة، الإصلاحات المطبقة، ومتوسط درجة الأمان.

### 3.4. `ai-security.js`

يقدم هذا الملف نظام أمان متقدم بالذكاء الاصطناعي، والذي يبدو أنه بديل أو مكمل لـ `ai-engine.js`. يتضمن:

*   **قاعدة بيانات الثغرات (`loadVulnerabilityDatabase`)**: تحتوي على أنماط (Regular Expressions) وأمثلة وقوالب إصلاح لأنواع مختلفة من الثغرات (SQL Injection, XSS, CSRF, Auth Bypass, File Upload).
*   **قاعدة المعرفة (`loadKnowledgeBase`)**: تتضمن معلومات عن 
code smells (مثل كلمات المرور الثابتة، كود التصحيح في الإنتاج) وأفضل الممارسات الأمنية.
*   **تحميل نماذج الذكاء الاصطناعي (`loadAIModels`)**: محاكاة لتحميل نماذج الكشف والإصلاح.
*   **التحليل المتقدم للكود (`advancedCodeAnalysis`)**: يستخدم قاعدة بيانات الثغرات وقاعدة المعرفة لتحديد الثغرات والتحذيرات والاقتراحات.
*   **توليد الإصلاح الذكي (`generateIntelligentFix`)**: يقترح إصلاحات بناءً على الثغرات المكتشفة وقوالب الإصلاح.

### 3.5. `security.js`

يقدم هذا الملف مجموعة من الوظائف الأساسية المتعلقة بالأمان:

*   **أنماط مسموحة (`أنماط_مسموحة`)**: تعريف تعبيرات نمطية (Regular Expressions) للتحقق من صحة المدخلات مثل البحث، الكود، والروابط.
*   **تنظيف الإدخال (`تنظيف_الإدخال`)**: وظيفة لتنظيف سلاسل الإدخال من أحرف HTML الخاصة لمنع هجمات XSS.
*   **فحص المدخلات (`فحص_بحث`, `فحص_كود`, `فحص_رابط`)**: دوال للتحقق من مطابقة المدخلات للأنماط المحددة.

### 3.6. `auth.js`

يتعامل هذا الملف مع نظام مصادقة المستخدمين:

*   **المستخدمون (`users`)**: يحتوي على بيانات المستخدمين الافتراضيين (عادي ومبرمج) مع كلمات مرور مشفرة.
*   **تشفير كلمات المرور (`hashPassword`, `verifyPassword`)**: يستخدم `crypto.subtle.digest` لتشفير كلمات المرور باستخدام SHA-256 وملح (`cybershield_salt_2024`).
*   **تنظيف المدخلات (`sanitizeInput`)**: وظيفة لتنظيف مدخلات اسم المستخدم وكلمة المرور.
*   **تسجيل الدخول (`login`)**: يتحقق من صحة بيانات الاعتماد، ويدير محاولات تسجيل الدخول الفاشلة لمنع هجمات القوة الغاشمة.
*   **تسجيل المحاولات (`recordAttempt`)**: يتتبع عدد محاولات تسجيل الدخول الفاشلة لكل مستخدم.

## 4. التفاعل بين المكونات

يتفاعل `index.html` مع `app.js` لتوفير الواجهة الديناميكية. يعتمد `app.js` على `ai-engine.js` و/أو `ai-security.js` لإجراء عمليات فحص وإصلاح الكود المدعومة بالذكاء الاصطناعي. تستخدم هذه المحركات بدورها `security.js` لتنظيف المدخلات والتحقق منها. يتم استخدام `auth.js` لإدارة عملية تسجيل الدخول وتحديد نوع المستخدم، مما يؤثر على الشاشات والميزات المتاحة عبر `app.js`.

## 5. نقاط القوة والضعف الأولية

### نقاط القوة:

*   **فصل الاهتمامات**: يتم فصل المنطق الأساسي (app.js)، ومحركات الذكاء الاصطناعي (ai-engine.js, ai-security.js)، ووظائف الأمان (security.js)، والمصادقة (auth.js) في ملفات منفصلة، مما يسهل الصيانة والتطوير.
*   **الذكاء الاصطناعي في المتصفح**: استخدام TensorFlow.js يسمح بتشغيل نماذج الذكاء الاصطناعي مباشرة في المتصفح، مما يقلل من الاعتماد على الخوادم ويحسن الاستجابة.
*   **واجهة مستخدم تفاعلية**: يوفر النظام واجهة مستخدم واضحة مع شاشات مخصصة لأنواع مختلفة من المستخدمين.
*   **آليات أمان أساسية**: تتضمن وظائف لتنظيف المدخلات وتشفير كلمات المرور وإدارة محاولات تسجيل الدخول.

### نقاط الضعف المحتملة:

*   **محاكاة نماذج الذكاء الاصطناعي**: حاليًا، نماذج الذكاء الاصطناعي في `ai-engine.js` و `ai-security.js` هي محاكاة وليست نماذج TensorFlow.js مدربة فعليًا. هذا يحد من القدرات الحقيقية للنظام.
*   **الاعتماد على Regex للكشف**: على الرغم من فعالية التعبيرات النمطية في كشف بعض الأنماط، إلا أنها قد لا تكون كافية لاكتشاف جميع الثغرات الأمنية المعقدة أو المتطورة. قد يؤدي ذلك إلى نتائج إيجابية خاطئة أو سلبية خاطئة.
*   **الأمان من جانب العميل**: تشغيل منطق الأمان والذكاء الاصطناعي بالكامل في المتصفح قد يثير مخاوف أمنية إذا لم يتم تأمين الواجهة الخلفية بشكل صحيح (إذا كانت موجودة). يمكن للمهاجمين تجاوز ضوابط الأمان من جانب العميل.
*   **قابلية التوسع**: قد يصبح النظام معقدًا وصعب التوسع مع إضافة المزيد من الميزات أو نماذج الذكاء الاصطناعي الحقيقية.
*   **إدارة الحالة**: يعتمد النظام على `localStorage` لتخزين نوع المستخدم، وهو أمر بسيط ولكنه قد لا يكون مناسبًا لتطبيقات أكثر تعقيدًا تتطلب إدارة حالة أكثر قوة.

## 6. الخلاصة

يمثل نظام CyberShield أساسًا جيدًا لمنصة توعوية تفاعلية للأمن السيبراني. يتميز ببنية منظمة واستخدام مبدئي للذكاء الاصطناعي في المتصفح. ومع ذلك، يتطلب تطوير نماذج الذكاء الاصطناعي الحقيقية وتحسين آليات الكشف والإصلاح، بالإضافة إلى تعزيز الأمان من جانب الخادم (إذا كان هناك تفاعل مع الخادم)، لكي يصبح نظامًا قويًا وفعالًا بشكل كامل.
